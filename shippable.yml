language: scala
scala:
  - 2.11.8

jdk:
  - oraclejdk8

env:
  global:
    - secure: CkWT5IN6B6vwynIQCCDC9sTsg0YE/22fZ0B9mcxNDSjw9QugVEsgRmBs60g5m0Vc0qTmJIsQsnz16gm+y6peT+W8vu5MpHaBBR7g0hv2CwWHJYkCABXIgh4ArqjT9T35dK4WSrEk8jSN4oORSgHAegEDf1XWbOTkYGLPQyQsKn4nEuZsGdEOlSIxTzgeOlmF98hWn51hSdwGM5nAFJrD20ROHNk7Qz5xrvOmlp2wRcgdagnz0FPeicbRtk+JZp0TNWKYe6o3VxYE0tQr1aICPQrr015QDMsB0b9wb7pY6JFk2SDztTonAy75bP9V8ucsklZtvH/rvt6wCYZk9fyFqA==

integrations:
  notifications:
    - integrationName: MUSIT-Slack
      type: slack
      recipients:
        - "#travis-builds"
      on_success: always
      on_failure: always

branches:
  only:
    - master

build:
  pre_ci_boot:
    # Using a docker image with latest scala and SBT pre-installed. Including some dependencies.
    image_name: kpmeen/docker-scala-sbt
    image_tag: latest
    pull: true
    options: "-e HOME=/root"

  ci:
    - echo $CODACY_PROJECT_TOKEN
    - sbt clean scalastyle
    - sbt -mem 2048 coverage test it:test coverageReport
    - sbt coverageAggregate codacyCoverage
