# --- !Ups

CREATE SCHEMA IF NOT EXISTS MUSIT_MAPPING;

CREATE TABLE MUSIT_MAPPING.ACTOR (
  ACTORID             NUMBER(20) GENERATED BY DEFAULT AS IDENTITY,
  ACTORNAME           VARCHAR2(512),
  DATAPORTEN_UUID     VARCHAR2(36),
  DATAPORTEN_USERNAME VARCHAR(100),
  OLD_USERNAME        VARCHAR2(50),
  LOKAL_PK            INTEGER,
  TABELLID            INTEGER,
  OLD_SCHEMANAME     VARCHAR2(50),
  MUSEUM_ID           INTEGER,
  APPLICATION_UUID    VARCHAR2(36),
  PRIMARY KEY (ACTORID)
);

CREATE SCHEMA IF NOT EXISTS MUSARK_ACTOR;

CREATE TABLE MUSARK_ACTOR.ORGANISATION (
  ORG_ID NUMBER(20) GENERATED BY DEFAULT AS IDENTITY,
  FULL_NAME VARCHAR(255) NOT NULL,
  NICKNAME VARCHAR(255),
  TEL VARCHAR(20),
  WEB VARCHAR(255),
  SYNONYMS VARCHAR(255),
  SERVICE_TAGS VARCHAR(500),
  PRIMARY KEY (ORG_ID)
);


CREATE TABLE MUSARK_ACTOR.ORGANISATION_ADDRESS (
  ORGADDRESSID NUMBER(20) GENERATED BY DEFAULT AS IDENTITY,
  ORG_ID NUMBER(20) NOT NULL,
  ADDRESS_TYPE VARCHAR(20),
  STREET_ADDRESS VARCHAR(20),
  LOCALITY VARCHAR(255),
  POSTAL_CODE VARCHAR(12),
  COUNTRY_NAME VARCHAR(255),
  LATITUDE FLOAT,
  LONGITUDE FLOAT,
  PRIMARY KEY (ORGADDRESSID),
  FOREIGN KEY (ORG_ID) REFERENCES MUSARK_ACTOR.ORGANISATION(ORG_ID)
);


CREATE SCHEMA IF NOT EXISTS MUSARK_AUTH;

CREATE TABLE MUSARK_AUTH.USER_INFO (
  user_uuid VARCHAR2(36) NOT NULL,
  secondary_id VARCHAR(512),
  name VARCHAR(512),
  email VARCHAR(254),
  picture VARCHAR(100),
  PRIMARY KEY (user_uuid)
);

INSERT INTO MUSARK_AUTH.USER_INFO (USER_UUID, SECONDARY_ID, NAME, EMAIL)
VALUES ('12345678-adb2-4b49-bce3-320ddfe6c90f', 'feide:fred@foo.com', 'Fred Flintstone', 'f.flintstone@foo.bar.com');

INSERT INTO MUSARK_AUTH.USER_INFO (USER_UUID, SECONDARY_ID, NAME, EMAIL)
VALUES ('d5a9a938-0905-470b-a892-88d0e7359579', 'feide:barney@foo.com', 'Barney Rubble', 'b.rubble@foo.bar.com');

INSERT INTO MUSIT_MAPPING.ACTOR (ACTORNAME, DATAPORTEN_UUID, DATAPORTEN_USERNAME, APPLICATION_UUID)
VALUES ('And, Arne1', null, 'andarn', '41ede78c-a6f6-4744-adad-02c25fb1c97c');

INSERT INTO MUSIT_MAPPING.ACTOR (ACTORNAME, DATAPORTEN_UUID, DATAPORTEN_USERNAME, APPLICATION_UUID)
VALUES ('Kanin, Kalle1', null, 'kaninka', '5224f873-5fe1-44ec-9aaf-b9313db410c6');

INSERT INTO MUSARK_ACTOR.ORGANISATION (ORG_ID, FULL_NAME, NICKNAME, TEL, WEB,SYNONYMS,SERVICE_TAGS)
VALUES (1, 'Kulturhistorisk museum - Universitetet i Oslo', 'KHM', '22 85 19 00', 'www.khm.uio.no','Kulturhistorisk museum|UKM|','storage_facility');

INSERT INTO MUSARK_ACTOR.ORGANISATION_ADDRESS (ORG_ID, ADDRESS_TYPE, STREET_ADDRESS, LOCALITY, POSTAL_CODE, COUNTRY_NAME, LATITUDE, LONGITUDE)
VALUES (1, 'WORK', 'Fredriks gate 2', 'OSLO', '0255', 'NORWAY', 0.0, 0.0);

# --- !Downs

DROP TABLE MUSIT_MAPPING.ACTOR;
DROP TABLE MUSARK_ACTOR.ORGANISATION_ADDRESS;
DROP TABLE MUSARK_ACTOR.ORGANISATION;